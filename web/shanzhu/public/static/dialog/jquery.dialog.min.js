/**
 * 基于JQuery UI 弹出框组件
 * date: 2018-05-28
 * author: summer <nommo@jiushikeji.cn>
 * version: 2.0.0
 */
!function(a){var e,f,g,h,i,b="@.SUI.DIALOG.HANDLE",c="@.SUI.DIALOG.DATA",d="@.SUI.DIALOG.OPENER";_dialog_callback="@.SUI.DIALOG.CALLBACK",e=function(a){var b=new Date;return a+"_"+(Math.floor(999*Math.random())+100)+b.getDate()+b.getHours()+b.getMinutes()+b.getSeconds()},g=function(b,c,d,e){var g,h;"object"==typeof c&&(d=c.callback,e=c.msec),clearTimeout(f),a("#dialogToast").remove(),g="undefined"==typeof e?!0:!1,h="loading"==b?!0:!1,h&&"undefined"==typeof c&&(c="数据加载中..."),a("body").append('<div id="dialogToast" class="dialog-toast dialog-toast-'+b+'">'+c+"</div>"),a("#dialogToast").css({marginLeft:-(a("#dialogToast").outerWidth()/2)+"px",top:"0px"}),(h&&!g||!h)&&(g&&(e=3),f=setTimeout(function(){a("#dialogToast").fadeOut("fast",function(){a(this).remove()})},1e3*e))},h=function(b,c,d,f){var g,h,i,j;"undefined"==typeof f&&(f={}),g=a.extend({message:c,ok:d,title:"温馨提示",cancel:null,okVal:"确定",cancelVal:"取消"},f),"object"==typeof c&&(g=a.extend(g,{message:"",ok:null},c)),h=e(b),a("body").append('<div id="'+h+'" style="display:none"><div class="dialog-ui-icon dialog-ui-'+b+'">'+g.message+"</div></div>"),i={modal:!0,resizable:!1,dialogClass:"jquery-ui-dialog",width:360,minHeight:150,closeText:"",title:g.title,focus:function(){a(this).parent().find("button").blur()},close:function(){a(this).remove()}},j=[{text:g.okVal,click:function(){a(this).dialog("close").remove(),a.isFunction(g.ok)&&g.ok()}}],"confirm"==b&&j.push({text:g.cancelVal,click:function(){a(this).dialog("close").remove(),a.isFunction(g.cancel)&&g.cancel()}}),i.buttons=j,a("#"+h).dialog(i)},"undefined"==typeof a.sui&&(a.sui={}),i={},i.dialog={open:function(c,f,g,h,i){var j,k,l;return window.top!=window.self?top.$.sui.dialog.open(c,f,g,h):("object"==typeof c&&(h=c,c=h.url,f=h.data,g=h.callback,i=h.onClick),h=a.extend({scrollX:!1,scrollY:!0,scroll:"auto"},h),j=e("dialog_iframe"),k=a('<div id="'+j+'_cover" class="ui-dialog-iframe-cover" style="display:none"></div>'),l=a('<div id="'+j+'" class="ui-dialog-iframe" style="visibility:hidden">'+'<div class="ui-dialog-header">'+"<h3></h3>"+'<div class="close"></div>'+"</div>"+'<div class="ui-dialog-contents">'+'<div class="cover" style="display:none"></div>'+'<iframe id="'+j+'_detector" style="display:none" scrolling="'+h.scroll+'" frameborder="0"></iframe>'+"</div>"+"</div>"),l.appendTo("body"),k.appendTo("body"),l.find(".ui-dialog-header .close").bind("click",function(){a.isFunction(i)&&i(),a("#"+j).fadeOut("fast",function(){a(this).remove()}),a("#"+j+"_cover").fadeOut("fast",function(){a(this).remove()})}),l.find(".ui-dialog-header h3").mousedown(function(b){var c=l.offset();absX=b.pageX-c.left,absY=b.pageY-c.top,l.find(".cover").show(),a(this).bind("selectstart",function(){return!1}),a(document).mousemove(function(b){l.stop();var c=b.pageX-absX,d=b.pageY-absY;0>=c?c=0:c+l.width()>a(document).width()&&(c=a(document).width()-l.width()),0>=d?d=0:d+l.height()>a(document).height()&&(d=a(document).height()-l.height()),l.css({left:c+"px",top:d+"px"})}).mouseup(function(){a(this).unbind("selectstart"),a(this).unbind("mousemove"),l.find(".cover").hide()})}),a.sui.loading.show("页面加载中"),a("#"+j+"_detector").load(function(){var e,i,m,n,o,p,q;a.sui.loading.hide(),k.show(),a(this).show(),e=/^(http:|https:|ftp:)\/\/.*/.test(c),e?(i="消息窗口",m=800,n=400):(i=a(this).contents().find("title").html(),m=a(this).contents().find("body").outerWidth(!0),n=a(this).contents().find("body").outerHeight(!0),h.scrollX||a(this).contents().find("body").css("overflow-x","hidden"),h.scrollY||a(this).contents().find("body").css("overflow-y","hidden")),m+10>a(window).width()&&(m=a(window).width()-10),n+70>a(window).height()&&(n=a(window).height()-60),o=a(window).scrollTop()+parseInt((a(window).height()-n-50)/2),p=a(window).scrollLeft()+parseInt((a(window).width()-m)/2),i="undefined"!=typeof h.title?h.title:i,q=a(".ui-dialog-iframe").length+9,k.css("z-index",q),l.css({left:p,top:o,width:m,"z-index":q+1,visibility:"visible"}),l.find(".ui-dialog-header h3").text(i),a(this).css({width:m,height:n}),a(this)[0].contentWindow[b]=j,f&&(a(this)[0].contentWindow[d]=f),a.isFunction(g)&&(a(this)[0].contentWindow[_dialog_callback]=g),a.isFunction(a(this)[0].contentWindow.onloadSuccess)&&a(this)[0].contentWindow.onloadSuccess()}).attr("src",c),j)},close:function(d,e,f){var g="undefined"!=typeof self.window[b]&&"undefined"==typeof d;return g?(top.$.sui.dialog.close(self.window[b],self.window[_dialog_callback],self.window[c]),void 0):window.top!=window.self?(top.$.sui.dialog.close(d),void 0):(g||(a.isFunction(e)&&e(f),a("#"+d).fadeOut("fast",function(){a(this).remove()}),a("#"+d+"_cover").fadeOut("fast",function(){a(this).remove()})),void 0)},data:function(a){return"undefined"==typeof a?self.window[d]?self.window[d]:"":(window.top!=window.self&&"undefined"!=typeof self.window[b]&&(self.window[c]=a),void 0)},updateSize:function(c,d,e){var g,h,i,j,f="undefined"!=typeof self.window[b]&&"undefined"==typeof c;return f?(window.top.$.sui.dialog.updateSize(self.window[b],a("body").width(),a("body").height()),void 0):(g=a("#"+c),h=g.find("iframe"),d+10>a(window).width()&&(d=a(window).width()-10),e+70>a(window).height()&&(e=a(window).height()-60),i=a(window).scrollTop()+parseInt((a(window).height()-e-50)/2),j=a(window).scrollLeft()+parseInt((a(window).width()-d)/2),g.animate({left:j,top:i,width:d},"fast"),h.animate({width:d,height:e},"fast"),void 0)}},i.message=function(b,c,d){return window.top!=window.self?(top.$.sui.message(b,c,d),void 0):(a("#dialog_message").remove(),a("body").append('<div id="dialog_message" style="display:none">'+b+"</div>"),a("#dialog_message").dialog({title:c,modal:!1,resizable:!1,dialogClass:"jquery-ui-dialog-message",width:270,minHeight:180,position:{at:"right bottom",of:window},closeText:"",close:function(){a(this).remove()}}),"undefined"!=typeof d&&setTimeout(function(){a("#dialog_message").dialog("close").remove()},1e3*d),void 0)},a.each(["alert","error","success","confirm"],function(a,b){i[b]=function(a,c,d){window.top!=window.self?top.$.sui[b](a,c,d):h(b,a,c,d)}}),i.toast={},a.each(["warning","error","success"],function(a,b){i.toast[b]=function(a,c,d){window.top!=window.self?top.$.sui.toast[b](a,c,d):g(b,a,c,d)}}),i.toast.loading={show:function(a,b,c){window.top!=window.self?top.$.sui.toast.loading.show(a,b,c):g("loading",a,b,c)},hide:function(){window.top!=window.self?top.$.sui.toast.loading.hide():a(".dialog-toast-loading").fadeOut("fast",function(){a(this).remove()})}},i.loading={show:function(b,c){if(window.top!=window.self)return top.$.sui.loading.show(b,c),void 0;"undefined"==typeof b&&(b="正在提交数据...");var d='<div class="jquery-dialog-loading"><div class="loading-icon"></div><p class="loading_content">'+b+'</p></div><div class="loading-overlay"></div>';a(".jquery-dialog-loading").remove(),a(".loading-overlay").remove(),a("body").append(d),"undefined"!=typeof c&&setTimeout(function(){a(".jquery-dialog-loading").fadeOut("fast",function(){a(this).remove()}),a(".loading-overlay").fadeOut("fast",function(){a(this).remove()})},1e3*c)},hide:function(){return window.top!=window.self?(top.$.sui.loading.hide(),void 0):(a(".jquery-dialog-loading").fadeOut("fast",function(){a(this).remove()}),a(".loading-overlay").fadeOut("fast",function(){a(this).remove()}),void 0)}},a.sui=a.extend(a.sui,i)}(window.jQuery);